task cleanDockerImages(type: Exec, description: 'Clean up dangling docker images.', group: 'docker') {
  executable "sh" //TODO move to root project
  args "-c", "docker rmi \$(docker images -aq --filter dangling=true) || true"

  // to clean up all our custom images:
  //docker rmi \$(docker images -aq --filter "label=ncei.metadata-catalog-vendor")
}

task clean {
  dependsOn cleanDockerImages
}

task debugDockerLogs(type:Exec, description: 'Print the docker logs before removing the containers.', group: 'docker') {
  executable "bash"
  args "-c", "docker ps -aq | xargs -n 1 docker logs || true"
}
